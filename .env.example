# 环境变量配置文件模板
# 复制此文件为 .env 并修改配置

# ============================================
# 模型配置
# ============================================

# 模型路径（容器内路径，不是宿主机路径！）
# Docker 部署：使用容器内挂载路径（默认 /models）
# 本地运行：使用宿主机完整路径
MODEL_PATH=/models/Qwen3-4B

# 模型名称（用于 API 响应）
MODEL_NAME=Qwen3-4B

# ============================================
# 常用模型路径（取消注释即可切换）
# 注意：Docker 部署时使用 /models/xxx，本地运行时使用完整路径
# ============================================

# Qwen3-4B（小模型，快速测试）
# Docker: MODEL_PATH=/models/Qwen3-4B
# 本地:  MODEL_PATH=/Users/tengpi/.cache/modelscope/hub/models/Qwen/Qwen3-4B
# MODEL_NAME=Qwen3-4B

# Qwen2.5-7B-Instruct（推荐，平衡性能和质量）
# Docker: MODEL_PATH=/models/Qwen2.5-7B-Instruct
# 本地:  MODEL_PATH=/Users/tengpi/.cache/modelscope/hub/models/Qwen/Qwen2.5-7B-Instruct
# MODEL_NAME=Qwen2.5-7B-Instruct

# Qwen2.5-14B-Instruct（更强性能）
# Docker: MODEL_PATH=/models/Qwen2.5-14B-Instruct
# 本地:  MODEL_PATH=/Users/tengpi/.cache/modelscope/hub/models/Qwen/Qwen2.5-14B-Instruct
# MODEL_NAME=Qwen2.5-14B-Instruct

# Qwen2.5-32B-Instruct（旗舰模型）
# Docker: MODEL_PATH=/models/Qwen2.5-32B-Instruct
# 本地:  MODEL_PATH=/Users/tengpi/.cache/modelscope/hub/models/Qwen/Qwen2.5-32B-Instruct
# MODEL_NAME=Qwen2.5-32B-Instruct

# 自定义模型
# Docker: MODEL_PATH=/models/your-model-name
# 本地:  MODEL_PATH=/your/custom/model/path
# MODEL_NAME=your-model-name

# ============================================
# 服务配置
# ============================================

# 服务监听地址（0.0.0.0 表示所有网卡）
SERVICE_HOST=0.0.0.0

# 服务端口
SERVICE_PORT=8000

# ============================================
# Docker 挂载配置
# ============================================

# 宿主机模型目录（Docker 挂载源）
# macOS/Linux 默认 modelscope 缓存目录
HOST_MODEL_DIR=${HOME}/.cache/modelscope/hub/models/Qwen

# 容器内模型目录（Docker 挂载目标）
CONTAINER_MODEL_DIR=/models

# ============================================
# 资源限制（Docker）
# ============================================

# CPU 核心数限制
CPU_LIMIT=4

# 内存限制（单位：G）
MEMORY_LIMIT=16G

# CPU 预留核心数
CPU_RESERVATION=2

# 内存预留（单位：G）
MEMORY_RESERVATION=8G

# ============================================
# 注意事项
# ============================================
# 1. 修改模型后需要重启服务：
#    docker-compose -f docker-compose.cpu.yml restart
#
# 2. 如果模型目录不在 modelscope 缓存，修改 HOST_MODEL_DIR
#
# 3. 确保 CONTAINER_MODEL_DIR 与 MODEL_PATH 的前缀匹配：
#    例如：HOST_MODEL_DIR -> /models 挂载
#         MODEL_PATH=/models/Qwen3-4B 才能访问到
#
# 4. 下载模型命令：
#    python -c "from modelscope import snapshot_download; snapshot_download('Qwen/模型名')"
